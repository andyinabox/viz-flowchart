<!DOCTYPE html>
<html lang="en">
  <head>
    <title>viz-flowchart</title>
    <meta charset="UTF-8">
  </head>
  <body>
    <viz-flowchart>
      <viz-actor id="user">User</viz-actor>
      <viz-actor id="frontend">Frontend</viz-actor>
      <viz-actor id="tenent">auth0 Tenent</viz-actor>
      <viz-actor id="api">API</viz-actor>
    
      <viz-step from="user" to="frontend">
        User clicks on the login link
      </viz-step>
      <viz-step from="frontend" to="frontend">
        User clicks on the login link
      </viz-step>
      <viz-step from="frontend" to="tenent">
        User clicks on the login link
      </viz-step>
      <viz-step from="tenent" to="api">
        User clicks on the login link
      </viz-step>
      <viz-step from="api" to="frontend">
        User clicks on the login link
      </viz-step>
      <viz-step from="frontend" to="user">
        User clicks on the login link
      </viz-step>
    </viz-flowchart>

    <script src="https://unpkg.com/d3@5.15.0/dist/d3.js"></script>
    <script>
      // ?module -> built es module
      // ?iife -> vanilla javascript
      const script = document.createElement('script')
      script.type = 'text/javascript'
      const mode = window.location.search.split('?')[1]
      switch (mode) {
        case 'module':
          script.type = 'module'
          script.src = '/dist/viz-flowchart.module.js'
          script.innerText = `import './dist/viz-flowchart.mjs'`
          break;
        case 'iife':
          script.src = '/dist/viz-flowchart.js'
          break;
        default:
          script.type = 'module'
          script.src = '/src/index.js'
      }
      document.body.appendChild(script)
    </script>
  </body>
</html>